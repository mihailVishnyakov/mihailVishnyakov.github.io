<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Filter JS</title>
</head>
<body>

<style>
#eFiltr_results {
    display: flex;
    flex-wrap: wrap;
}

#eFiltr_results [filterpriceactive='0'] {
    width: calc(100% / 4 - 20px);
    margin: 10px;
}

#eFiltr_results [filterpriceactive='0'] img {
    display: block;
    width: calc(100% - 20px);
    box-sizing: border-box;
}

#eFiltr_results [filterpriceactive='0'] span {
    width: 100%;
    display: block;
    font-size: 30px;
    text-align: center;
}

.sort_item#eFiltr_results {
    display: flex;
    flex-wrap: wrap;
}

.sort_item_wrapp > div {
    display: inline-block;
    box-sizing: border-box;
    margin: 10px;
    padding: 15px;
    background: linear-gradient(67deg, #038adf, #01bce6);
    color: #fff;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
}

/*paginate items style*/
#eFiltr_results form{
  display: none;
}

#eFiltr_results .active ~ form{
  display: block;
}

#eFiltr_results .end_active ~ form{
  display: none;
}
/**/

/**/
.paginatWrapp {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 10px;
}

.page_paginate {
    display: inline-block;
    box-sizing: border-box;
    border: 1px solid #028edf;
    padding: 5px;
    min-width: 30px;
    margin: 3px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 500;
}

.page_paginate.active {
    background: linear-gradient(67deg, #038adf, #01bce6);
    color: #fff;
}
/**/
</style>


	<h1>NAtiv filter in JS</h1>
	
<div class="new_inker_item_wrapp filter_new">
	<div class="new_inker_item_wrapp_title filter_new">Подбор товара</div>

	<div class="new_inker_item_wrapp_cont price_filter_wrapp">
		<div class="new_inker_item_wrapp_cont_name">Цена</div>
		<div class="new_inker_item_wrapp_cont_descr">
			<span>
				<i>от </i>
				<input type="text" class="price_min" value="0">
			</span>
			<span>
				<i>до</i>
				<input type="text" class="price_max" value="99999">
			</span>
		</div>
	</div>

	<div class="new_inker_item_wrapp_cont width_filter_wrapp">
		<div class="new_inker_item_wrapp_cont_name">Толщина</div>
		<div class="new_inker_item_wrapp_cont_descr">
			<select name="select_width">
			  <option value="0"> - Толщина - </option>
			  <option value="1,5 см">1,5 см</option>
			  <option value="2 см">2 см</option>
			  <option value="3 см">3 см</option>
			  <option value="4 см">4 см</option>
			  <option value="5 см">5 см</option>
			  <option value="6 см">6 см</option>
			  <option value="1-3 см">1-3 см</option>
			  <option value="2-4 см">2-4 см</option>
			  <option value="6-9 см">6-9 см</option> 
			  <option value="10-15 см">10-15 см</option>
			  <option value="1-3 см (облицовка)">1-3 см (облицовка)</option>
			  <option value="3-4 см (дорожки)">3-4 см (дорожки)</option>
			  <option value="5-6 см (автомобили,парковки)">5-6 см (автомобили,парковки)</option> 
			  <option value="7-15 см ( кладочный)">7-15 см ( кладочный)</option>  
			</select>
		</div>
	</div>

	<div class="new_inker_item_wrapp_cont color_filter_wrapp natural_rock_main_wrapp_select">
		<div class="new_inker_item_wrapp_cont_name">Цвет</div>
		<div class="new_inker_item_wrapp_cont_descr">
			<select name="select_colornaturalrock" value="">
			  <option value="0" selected="selected"> - Цвет - </option>
			  <option value="белый">белый</option>
			  <option value="желтый">желтый</option>
			  <option value="зеленый">зеленый</option>
			  <option value="коричневый">коричневый</option>
			  <option value="красный">красный</option>
			  <option value="розовый">розовый</option>
			  <option value="серый">серый</option>
			  <option value="фиолетовый">фиолетовый</option>
			</select>
		</div>
	</div>

	<div class="filter_submit_wrapp">
		<button>Применить фильтр</button>
	</div>
	<div class="filter_rezet_wrapp">
		<button>Сбросить фильтр</button>
	</div>

</div>

<div class="sort_item_main_wrapp">
	<div class="sort_item_wrapp_title">
		<span>Сортировать по:</span>
	</div>
	<div class="sort_item_wrapp_title one">
		<span>По цене <i></i></span>
		<div class="sort_item_wrapp price">
			<div class="sort_up">Сначала дорогие</div>
			<div class="sort_down">Сначала дешевые</div>
		</div>
	</div>
	<div class="sort_item_wrapp_title two">
		<span>По названию <i></i></span>
		<div class="sort_item_wrapp name">
			<div class="sort_up_name">По названию (А-Я)</div>
			<div class="sort_down_name">По названию (Я-А)</div>
		</div>
	</div>
</div>


<div id="eFiltr_results">
	<form action="" method="post" data-itemname="песчаник белый" data-price="350" data-colornaturalrock="белыйыфвф" data-color="" data-width="1,5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник белый</span>
		<span>Цена: 350</span>
	</form>
	<form action="" method="post" data-itemname="песчаник желтый" data-price="420" data-colornaturalrock="желтыйфвфы" data-color="" data-width="2 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник желтый</span>
		<span>Цена: 420</span>
	</form>
	<form action="" method="post" data-itemname="песчаник зеленый" data-price="4900" data-colornaturalrock="зеленыйфвыфв" data-color="" data-width="3 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник зеленый</span>
		<span>Цена: 4900</span>
	</form>
	<form action="" method="post" data-itemname="кварц коричневый" data-price="4100" data-colornaturalrock="коричневыйыфвф" data-color="" data-width="4 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц коричневый</span>
		<span>Цена: 4100</span>
	</form>
	<form action="" method="post" data-itemname="кварц красный" data-price="6000" data-colornaturalrock="красныйыфвф" data-color="" data-width="5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц красный</span>
		<span>Цена: 6000</span>
	</form>
	<form action="" method="post" data-itemname="кварц розовый" data-price="7000" data-colornaturalrock="розовыйыфвф" data-color="" data-width="6 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц розовый</span>
		<span>Цена: 7000</span>
	</form>
	<form action="" method="post" data-itemname="песчаник белый" data-price="350" data-colornaturalrock="белыйыфвф" data-color="" data-width="1,5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник белый</span>
		<span>Цена: 350</span>
	</form>
	<form action="" method="post" data-itemname="песчаник желтый" data-price="370" data-colornaturalrock="желтыйыфвф" data-color="" data-width="2 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник желтый</span>
		<span>Цена: 370</span>
	</form>
	<form action="" method="post" data-itemname="песчаник зеленый" data-price="4900" data-colornaturalrock="зеленыйыфвф" data-color="" data-width="3 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник зеленый</span>
		<span>Цена: 4900</span>
	</form>
	<form action="" method="post" data-itemname="кварц коричневый" data-price="4100" data-colornaturalrock="коричневыйыфвф" data-color="" data-width="4 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц коричневый</span>
		<span>Цена: 4100</span>
	</form>
	<form action="" method="post" data-itemname="кварц красный" data-price="6000" data-colornaturalrock="красныйыфвф" data-color="" data-width="5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц красный</span>
		<span>Цена: 6000</span>
	</form>
	<form action="" method="post" data-itemname="кварц розовый" data-price="7000" data-colornaturalrock="розовыйыфвф" data-color="" data-width="6 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц розовый</span>
		<span>Цена: 7000</span>
	</form>
	<form action="" method="post" data-itemname="песчаник белый" data-price="350" data-colornaturalrock="белыйыфвф" data-color="" data-width="1,5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник белый</span>
		<span>Цена: 350</span>
	</form>
	<form action="" method="post" data-itemname="песчаник желтый" data-price="420" data-colornaturalrock="желтыйыфвф" data-color="" data-width="2 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник желтый</span>
		<span>Цена: 420</span>
	</form>
	<form action="" method="post" data-itemname="песчаник зеленый" data-price="4900" data-colornaturalrock="зеленыйыфвф" data-color="" data-width="3 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник зеленый</span>
		<span>Цена: 4900</span>
	</form>
	<form action="" method="post" data-itemname="кварц коричневый" data-price="4100" data-colornaturalrock="коричневыйыфвф" data-color="" data-width="4 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц коричневый</span>
		<span>Цена: 4100</span>
	</form>
	<form action="" method="post" data-itemname="кварц красный" data-price="6000" data-colornaturalrock="красныйыфвф" data-color="" data-width="5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц красный</span>
		<span>Цена: 6000</span>
	</form>
	<form action="" method="post" data-itemname="кварц розовый" data-price="7000" data-colornaturalrock="розовыйыфвф" data-color="" data-width="6 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц розовый</span>
		<span>Цена: 7000</span>
	</form>
	<form action="" method="post" data-itemname="песчаник белый" data-price="350" data-colornaturalrock="белыйыфвф" data-color="" data-width="1,5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник белый</span>
		<span>Цена: 350</span>
	</form>
	<form action="" method="post" data-itemname="песчаник желтый" data-price="420" data-colornaturalrock="желтыйыфвф" data-color="" data-width="2 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник желтый</span>
		<span>Цена: 420</span>
	</form>
	<form action="" method="post" data-itemname="песчаник зеленый" data-price="4900" data-colornaturalrock="зеленыйыфвф" data-color="" data-width="3 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник зеленый</span>
		<span>Цена: 4900</span>
	</form>
	<form action="" method="post" data-itemname="кварц коричневый" data-price="4100" data-colornaturalrock="коричневыйыфвф" data-color="" data-width="4 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц коричневый</span>
		<span>Цена: 4100</span>
	</form>
	<form action="" method="post" data-itemname="кварц красный" data-price="6000" data-colornaturalrock="красныйыфвф" data-color="" data-width="5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц красный</span>
		<span>Цена: 6000</span>
	</form>
	<form action="" method="post" data-itemname="кварц розовый" data-price="7000" data-colornaturalrock="розовыйыфвф" data-color="" data-width="6 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц розовый</span>
		<span>Цена: 7000</span>
	</form>
	<form action="" method="post" data-itemname="песчаник белый" data-price="350" data-colornaturalrock="белыйыфвф" data-color="" data-width="1,5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник белый</span>
		<span>Цена: 350</span>
	</form>
	<form action="" method="post" data-itemname="песчаник желтый" data-price="420" data-colornaturalrock="желтыйыфвф" data-color="" data-width="2 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник желтый</span>
		<span>Цена: 420</span>
	</form>
	<form action="" method="post" data-itemname="песчаник зеленый" data-price="4900" data-colornaturalrock="зеленыйыфвф" data-color="" data-width="3 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>песчаник зеленый</span>
		<span>Цена: 4900</span>
	</form>
	<form action="" method="post" data-itemname="кварц коричневый" data-price="4100" data-colornaturalrock="коричневыйыфвф" data-color="" data-width="4 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц коричневый</span>
		<span>Цена: 4100</span>
	</form>
	<form action="" method="post" data-itemname="кварц красный" data-price="6000" data-colornaturalrock="красныйыфвф" data-color="" data-width="5 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц красный</span>
		<span>Цена: 6000</span>
	</form>
	<form action="" method="post" data-itemname="кварц розовый" data-price="7000" data-colornaturalrock="розовыйыфвф" data-color="" data-width="6 см" filterpriceactive="0">
		<img src="image.jpg" alt="">
		<span>кварц розовый</span>
		<span>Цена: 7000</span>
	</form>
</div>

<div class="paginatWrapp" style="display: flex;"></div>

<script type="text/javascript" src="https://inkerkam.ru/assets/snippets/shopkeeper/js/jquery-1.6.3.min.js"></script>


<script>
	function mainFilterItems() {

		let nodeList = document.querySelectorAll('[filterpriceactive="0"]');
		let filterArray = document.querySelectorAll('#eFiltr_results');
		let reservArray = document.querySelectorAll('[filterpriceactive="0"]')
		let itemsArray = [];

		let showElemsPaginate = 18; //количество показываемых елементов

		/*function paginate start*/
		function paginateMain(nodeList){
			
			//Количество страниц пагинации
			let allNumberProduct = nodeList; // все элементы для пагинации
			let allNumberProductPaginate = nodeList.length; //Количество элементов на странице

			console.log(allNumberProductPaginate);

			let numberPaginatePage = nodeList.length <= showElemsPaginate ? 1 : Math.ceil(allNumberProductPaginate / showElemsPaginate);

			//генерация списка страниц
			let paginatWrapp = document.querySelector(".paginatWrapp");

			if(allNumberProductPaginate <= showElemsPaginate){
				$(".paginatWrapp").css({'display' : 'none'});
			} else{
				$(".paginatWrapp").css({'display' : 'flex'});
			}

			let page = "";

			for (let i = 0; i < numberPaginatePage; i++) {
				page += "<span number-page=" + i * showElemsPaginate + "  class=\"page_paginate " + (i + 1) + "\">" + (i + 1) + "</span>";
			}
			paginatWrapp.innerHTML = page;

			//классы активности для елементов на первой странице пагинации
			paginatWrapp.firstChild.classList.add('active');

			let wrapArray = [...document.querySelectorAll('#eFiltr_results > div')];
			for(let i = 0; i < wrapArray.length; i++){
				wrapArray[i].classList.add(i + 1);
			}

		    let correctParrent = document.querySelectorAll('[filterpriceactive="0"]')[0].parentElement;

		    Array.from(document.querySelectorAll('#eFiltr_results > div')).forEach(elem => elem.remove());
		    
		    document.querySelectorAll('[filterpriceactive="0"]').forEach((elem, index) => {

		        let parentElem = document.querySelector('#eFiltr_results');
		        let separElem = document.createElement("div");
		        let separTwo = document.createElement("div");
		        
		        if((index % showElemsPaginate) + 1 == true){
		         
		          parentElem.insertBefore(separElem, elem);
		          parentElem.insertBefore(separElem, elem);
		          parentElem.insertBefore(separTwo, elem);
		        }


		    });

		  

			let lastParentElem = document.createElement("div");
			document.querySelector('#eFiltr_results').appendChild(lastParentElem);
		  
			[...document.querySelectorAll('#eFiltr_results > div')].forEach((elem, index) => {
				if(index % 2 == true){
				  elem.classList.add('paginStart');
				} else {
				  elem.classList.add('paginEnd');
				}

			});
		  
			document.querySelector('#eFiltr_results > div').remove();
		  
			//вешаем класс activ на страницу пагинации
			[...document.querySelectorAll('#eFiltr_results > div.paginStart')][0].classList.add('active');
			[...document.querySelectorAll('#eFiltr_results > div.paginEnd')][0].classList.add('end_active');

			$('.paginatWrapp > span').click(function(){
				$('.paginatWrapp > span').removeClass('active');
				$('#eFiltr_results > div.paginStart').removeClass('active');
				$('#eFiltr_results > div.paginEnd').removeClass('end_active');
				this.classList.add('active');

				[...document.querySelectorAll('.paginatWrapp > span')].forEach((elem, index) => {
					if(elem.classList.contains('active') == true){
						[...document.querySelectorAll('#eFiltr_results > div.paginStart')][index].classList.add('active');
						[...document.querySelectorAll('#eFiltr_results > div.paginEnd')][index].classList.add('end_active');
					}
				});
			});
		  


		}
		/*function sort item end*/

  

		/*function filter and filter rezet start*/
		function itemFilter(elements) {
			//for "gifted" users
			let minPrice = parseInt(document.querySelector('.price_min').value) > parseInt(document.querySelector('.price_max').value) ? 0 : parseInt(document.querySelector('.price_min').value);
			let maxPrice = parseInt(document.querySelector('.price_max').value);

			let color = document.querySelector('[name="select_colornaturalrock"]');
			let colorValue = color.options[color.selectedIndex].value;
			let width = document.querySelector('[name="select_width"]');
			let widthValue = width.options[width.selectedIndex].value;
			
			for(let elem of elements) {
				//filter on price
				if(parseInt(elem.getAttribute('data-price')) > minPrice && parseInt(elem.getAttribute('data-price')) <= maxPrice) {
					//console.log(elem.getAttribute('data-colornaturalrock'));
					
				} else {
					elem.remove();
				}

				//filter on color
				if (colorValue == '0' || elem.dataset.colornaturalrock.match(colorValue)) {

				} else {
					elem.remove();
				}

				//filter on width
				if (widthValue == '0' || elem.dataset.width.match(widthValue)) {

				} else {
					elem.remove();
				}

			}

			Array.from(document.querySelectorAll('#eFiltr_results > div')).forEach(elem => elem.remove());
			paginateMain(document.querySelectorAll('#eFiltr_results [filterpriceactive="0"]'));


		}

		function itemFilterRezet(elements) {
			for(let elem of elements) {
				elem.remove();
			}


			for(let item of nodeList) {
				filterArray[0].appendChild(item);
			}

			Array.from(document.querySelectorAll('#eFiltr_results > div')).forEach(elem => elem.remove());

			paginateMain(reservArray);
			
		}

		$('.filter_submit_wrapp button').click(event => {
			itemFilterRezet(nodeList);
			itemFilter(nodeList);
		});

		$('.filter_rezet_wrapp button').click(event => itemFilterRezet(nodeList));

		/*function filter and filter rezet end*/



		/*function sort start*/
		function sort(value) {

			for (let item of nodeList) {
				itemsArray.push(item);
			}

			switch(value) {
				case 'sortUp':
					itemsArray.sort(function(nodeA, nodeB) {
						if (parseInt(nodeA.getAttribute('data-price')) < parseInt(nodeB.getAttribute('data-price'))) return 1;
						if (parseInt(nodeA.getAttribute('data-price')) > parseInt(nodeB.getAttribute('data-price'))) return -1;
						return 0;
					});
				break;
				case 'sortDown':
					itemsArray.sort(function(nodeA, nodeB) {
						if (parseInt(nodeA.getAttribute('data-price')) > parseInt(nodeB.getAttribute('data-price'))) return 1;
						if (parseInt(nodeA.getAttribute('data-price')) < parseInt(nodeB.getAttribute('data-price'))) return -1;
						return 0;
					});
				break;
				case 'sortUpName':
					itemsArray.sort(function(nodeA, nodeB) {
						if (nodeA.getAttribute('data-itemname').substr(0, 1) > nodeB.getAttribute('data-itemname').substr(0, 1)) return 1;
						if (nodeA.getAttribute('data-itemname').substr(0, 1) < nodeB.getAttribute('data-itemname').substr(0, 1)) return -1;
						return 0;
					});
				break;
				case ('sortDownName'):
					itemsArray.sort(function(nodeA, nodeB) {
						if (nodeA.getAttribute('data-itemname').substr(0, 1) < nodeB.getAttribute('data-itemname').substr(0, 1)) return 1;
						if (nodeA.getAttribute('data-itemname').substr(0, 1) > nodeB.getAttribute('data-itemname').substr(0, 1)) return -1;
						return 0;
					});
				break;
			}

			
			Array.from(document.querySelectorAll('#eFiltr_results > div')).forEach(elem => elem.remove());


			for (let item of itemsArray) {
				filterArray[0].append(item);
			}
			
			paginateMain(nodeList);

			itemFilter(nodeList);

			
		}
		/*function sort end*/

		$('.sort_up').click(event => sort('sortUp'));
		$('.sort_down').click(event => sort('sortDown'));
		$('.sort_up_name').click(event => sort('sortUpName'));
		$('.sort_down_name').click(event => sort('sortDownName'));

		paginateMain(nodeList);

	}

mainFilterItems();	
</script>

</body>
</html>